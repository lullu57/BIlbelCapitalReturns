# GIPS-Compliant Returns Calculator Configuration
# ================================================
# 
# Copy this file to config.yaml and update with your values.
# Do NOT commit config.yaml to version control.

# Brokerage configurations
# Enable/disable brokerages as needed
brokerages:
  - name: IBKR
    module: IBKR
    enabled: true
  - name: Exante
    module: Exante
    enabled: true
  # Add more brokerages as needed:
  # - name: CustomBroker
  #   module: custom_broker
  #   enabled: false

# Client configurations
# Clients are auto-discovered from CSV files in the input directory
# This section is for reference/documentation
clients: []

# Fee structure
# Update these values to match your fee agreement
fees:
  # Management fee: 0.25% of NAV per quarter (1% annual equivalent)
  # TIMING: Charged on the FIRST day of each quarter
  management_fee_quarterly: 0.0025  # 0.25% per quarter
  
  # Performance fee rate as decimal (25% = 0.25)
  # Applied to NAV gains above (high-water-mark + quarterly hurdle)
  performance_fee_rate: 0.25
  
  # Annual hurdle rate as decimal (6% = 0.06)
  # Split across quarters: Q1=1.5%, Q2=3%, Q3=4.5%, Q4=6%
  # TIMING: Performance fee charged on LAST day of each quarter
  # 
  # HIGH-WATER-MARK LOGIC:
  # - Fees only charged if NAV > highest previous NAV + accumulated hurdle
  # - HWM is adjusted for flows (deposits/withdrawals)
  # - HWM persists forever (never resets)
  #
  # HURDLE RESET:
  # - Hurdle accumulation is applied each quarter (no annual reset)
  hurdle_rate_annual: 0.06

# Thresholds for various calculations
thresholds:
  # Large cash flow threshold as percentage of portfolio NAV
  # Flows exceeding this are flagged for GIPS compliance review
  # 10% is the typical GIPS standard
  large_cash_flow_pct: 0.10

# Reporting periods configuration
periods:
  # Fiscal year start month (1 = January, 2 = February, etc.)
  # February means fiscal year runs Feb 1 - Jan 31
  # This also sets quarter boundaries for fee timing
  fiscal_year_start_month: 2
  
  # Years to calculate returns for
  # Update this list to include your reporting years
  reporting_years:
    - 2022
    - 2023
    - 2024
    - 2025

# Input/Output paths
# These can be relative to the project root or absolute paths
paths:
  input_dir: input
  output_dir: results
  log_dir: logs

# Currency settings
currency:
  base_currency: EUR
  # Optional reporting currency. If set and different from base_currency,
  # daily FX conversion is applied using the configured FX rates.
  report_currency: EUR
  # Flow column names in order of preference
  # The system will use the first matching column found
  flow_columns:
    - "Adjusted EUR"
    - "EUR equivalent"
    - "Amount"
  # FX rates configuration (required when report_currency != base_currency)
  fx_rates_file: null
  fx_rates_sheet: null
  fx_date_column: "TIME_PERIOD"
  fx_rate_column: null
  fx_fill_method: "ffill"

# Brokerage-specific settings
# These define how to parse data from each brokerage's files
brokerage_settings:
  IBKR:
    # NAV source file (generated by IBKR.process())
    nav_file: "allocation_by_asset_class.csv"
    nav_column: "NAV"
    date_formats:
      - "%Y%m%d"
      - "%m/%d/%y"
    # Flow source file
    flow_file: "deposits_and_withdrawals.csv"
    flow_amount_column: "Amount"
    # Legitimate cash flow patterns to include
    include_patterns:
      - "Cash Receipts / Electronic Fund Transfers"
      - "Disbursement Initiated By"
    # Patterns to exclude from cash flows
    exclude_patterns:
      - "Quantity:"
      - "Adjustment: Cash Receipt / Disbursement / Transfer"
      - "Adjustment:"
  
  Exante:
    # NAV source file (generated by Exante.process())
    nav_file: "NAV.xlsx"
    nav_column: "Net Asset Value"
    date_column: "Date"
    # Flow source file
    flow_file: "Trades.xlsx"
    flow_amount_column: "EUR equivalent"
    flow_date_column: "When"
    # Only include these operation types
    operation_types:
      - "FUNDING/WITHDRAWAL"
